@page "/articles"
@inject NavigationManager Navigation
@inject ArticleService ArticleService

<h1>Articles</h1>

<button class="btn btn-primary" @onclick="CreateNew">New Article</button>

@if (articles == null)
{
    <p>Loading...</p>
}
else if (articles.Count == 0)
{
    <p>No articles yet.</p>
}
else
{
    <ul>
    @foreach (var article in articles)
    {
        <li>
            <strong>@article.Title</strong> - @article.Created.ToLocalTime().ToString("g")
        </li>
    }
    </ul>
}

@code {
    private List<Article>? articles;

    protected override async Task OnInitializedAsync()
    {
        articles = await ArticleService.GetArticlesAsync();
    }

    private void CreateNew()
    {
        Navigation.NavigateTo("/new-article");
    }
}
